{%- assign c = include.c -%}
<details class="catalog">
  <summary>
    <span class="name">
      {{ c.name }}
      {%- if c.landing_url or c.doi -%}
        <a class="ext" href="{{ c.landing_url | default: 'https://doi.org/' | append: c.doi }}"
           target="_blank" rel="noopener" aria-label="Open catalog link">↗</a>
      {%- endif -%}
    </span>
    <span class="meta">
      {%- if c.redshift_type -%}{{ c.redshift_type | upcase }}{%- endif -%}
      {%- if c.shape_method -%}{% if c.redshift_type %} • {% endif %}{{ c.shape_method }}{%- endif -%}
      {%- if c.sky_area_deg2 -%} • {{ c.sky_area_deg2 }} deg²{%- endif -%}
      {%- if c.n_shapes -%} • {{ c.n_shapes }} shapes{%- endif -%}
    </span>
  </summary>

  <div class="catalog-details">
    <div class="cols">
      <div>
        <h5>Redshifts</h5>
        <p>
          {{ c.redshift_survey }}
          {%- if c.redshift_sample %} ({{ c.redshift_sample }}){%- endif -%}
          {%- if c.redshift_type %}, {{ c.redshift_type }}{%- endif -%}
        </p>
      </div>
      <div>
        <h5>Shapes</h5>
        <p>
          {{ c.shape_survey }}
          {%- if c.shape_sample %} ({{ c.shape_sample }}){%- endif -%}
          {%- if c.shape_method %}, {{ c.shape_method }}{%- endif -%}
        </p>
      </div>
      <div>
        <h5>Coverage & Counts</h5>
        <p>
          {%- if c.sky_area_deg2 %}Area: {{ c.sky_area_deg2 }} deg²<br>{%- endif -%}
          {%- if c.n_clustering %}Clustering: {{ c.n_clustering }} objects<br>{%- endif -%}
          {%- if c.n_shapes %}Shapes: {{ c.n_shapes }} objects{%- endif -%}
        </p>
      </div>
    </div>

    {%- if c.aux %}<p><strong>Aux:</strong> {{ c.aux }}</p>{%- endif -%}
    {%- if c.notes %}<p><strong>Notes:</strong> {{ c.notes }}</p>{%- endif -%}

    <p class="links">
      {%- if c.doi -%}<a href="https://doi.org/{{ c.doi }}" target="_blank" rel="noopener">DOI</a>{%- endif -%}
      {%- if c.landing_url -%}{% if c.doi %} • {% endif %}<a href="{{ c.landing_url }}" target="_blank" rel="noopener">Landing page</a>{%- endif -%}
      {%- if c.license -%}{% if c.doi or c.landing_url %} • {% endif %}License: {{ c.license }}{%- endif -%}
    </p>
  </div>
</details>
