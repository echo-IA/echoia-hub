{%- comment -%}
Per-page/front-matter overrides you can set:
  banner_title: "echo-IA"
  banner_byline: "echo-IA Community"
  banner_cta: "Tell me more"
  banner_cta_url: "#about"        # anchor on the SAME page (preferred)
  banner_lines: ["· line one ·", "· line two ·", "· line three ·"]

If banner_cta_url is:
  - "#foo"         → scrolls to section id="foo" on the SAME page
  - "/path/"       → internal page link (runs through relative_url)
  - "https://..."  → external link (opens in new tab)
Defaults to "/#about" if nothing provided.
{%- endcomment -%}

{%- assign banner_title = include.title
  | default: page.banner_title
  | default: page.title
  | default: site.title
  | default: "echoIA Hub" -%}

{%- assign banner_byline = include.byline
  | default: page.banner_byline
  | default: site.tagline
  | default: "Intrinsic Alignments, end-to-end." -%}

{%- assign banner_cta = include.cta
  | default: page.banner_cta
  | default: "Tell me more" -%}

{%- assign banner_cta_url = include.cta_url
  | default: page.banner_cta_url
  | default: "/#about" -%}

<section id="banner">
  <div class="inner">
    <header>
      <h2>{{ banner_title }}</h2>
      <p class="byline">{{ banner_byline }}</p>
    </header>

    {%- assign lines = include.lines | default: page.banner_lines -%}
    {%- if lines -%}
      {%- for line in lines -%}
        <p>{{ line }}</p>
      {%- endfor -%}
    {%- else -%}
      <p>&#183; A hub for Intrinsic Alignment research &#183;</p>
      <p>&#183; Catalogs, datasets, code, and meetings &#183;</p>
      <p>&#183; Discover, collaborate, and contribute &#183;</p>
    {%- endif -%}

    {%- comment -%} Figure out the final href + attributes {%- endcomment -%}
    {%- assign raw_href = banner_cta_url | default: "/#about" -%}
    {%- assign first_char = raw_href | slice: 0, 1 -%}
    {%- assign is_external = raw_href contains "://" -%}

    {%- if is_external -%}
      {%- assign final_href = raw_href -%}
      {%- assign extra_attrs = ' target="__blank" rel="noopener"' -%}
    {%- elsif first_char == "#" -%}
      {%- assign final_href = raw_href -%}{%- comment -%} same-page anchor; no relative_url {%- endcomment -%}
      {%- assign extra_attrs = '' -%}
    {%- else -%}
      {%- assign final_href = raw_href | relative_url -%}
      {%- assign extra_attrs = '' -%}
    {%- endif -%}

    <footer>
      <ul class="buttons">
        <li>
          <a href="{{ final_href }}" class="button scrolly"{{ extra_attrs }}>
            {{ banner_cta }}
          </a>
        </li>
      </ul>
    </footer>
  </div>
</section>
